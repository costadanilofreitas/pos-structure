<?xml version="1.0" encoding="UTF-8"?>
<config version="1.0">
    <group name="Identification">
        <key name="VersionId">
            <string>1.0.0</string>
        </key>
        <key name="ComponentName">
            <string>PosUpdater</string>
        </key>
    </group>
    <group name="Process">
        <key name="OnAbnormalTermination" descr="restart;abort;ignore">
            <string>restart</string>
        </key>
        <key name="OnLoadFailure" descr="abort;ignore">
            <string>abort</string>
        </key>
        <key name="Arguments" descr="process arguments">
            <array>
                <string>runpackage.py</string>
                <string>../../../src/pos-updater/src</string>
                <string>../../../src/pos-updater/lib</string>
                <string>common.pypkg</string>
            </array>
        </key>
        <key name="ExecutableModule">
            <string>python</string>
        </key>
        <key name="InitialState" descr="disabled;manual;automatic">
            <string>manual</string>
        </key>
    </group>
    <group name="PosUpdater">
        <key name="RequiredServices" descr="List of POS services required to component startup">
            <array>
                <string>StoreWideConfig</string>
                <string>PosUpdaterPersistence</string>
            </array>
        </key>
        <key name="PersistenceName" descr="Persistence module used by component">
            <string>PosUpdaterPersistence</string>
        </key>
        <key name="BaseURL" descr="API base URL">
            <string>https://qa.backoffice.hmledp.com.br/pump</string>
        </key>
        <key name="APIKey" descr="Authentication for catalog API requests">
            <string>111111-2222-3333-4444-012345678910</string>
        </key>
        <group name="Catalog" descr="Updater configurations for catalog API">
            <key name="Enabled">
                <boolean>True</boolean>
            </key>
            <key name="RestartAfterApply">
                <boolean>False</boolean>
            </key>
            <key name="WorkDirectory" descr="Directory to work with updates">
                <string>{HVDATADIR}/updater</string>
            </key>
            <key name="PoolingFrequency" descr="Time in seconds of catalog polling frequency and try to apply an pending update">
                <integer>3600</integer>
            </key>
            <group name="Window" descr="Update window hour. Format: %H:%M:%S">
                <key name="StartTime">
                    <string>08:00:00</string>
                </key>
                <key name="EndTime">
                    <string>23:59:00</string>
                </key>
            </group>
            <group name="Endpoints" descr="Catalog API endpoints">
                <key name="getLatestVersion" descr="Check latest update version">
                    <string>/update/{storeId}/getLatestVersion</string>
                </key>
                <key name="download" descr="Get the download URL to respective pending update">
                    <string>/update/{storeId}/download</string>
                </key>
                <key name="updateTo" descr="Signals successful update">
                    <string>/update/{storeId}/updateTo/{versionNumber}</string>
                </key>
            </group>
        </group>
        <group name="Media" descr="Updater configurations for media API">
            <key name="Enabled">
                <boolean>True</boolean>
            </key>
            <key name="ImagesDirectory" descr="POS directory to store images">
                <string>{HVDATADIR}/images</string>
            </key>            
            <key name="PoolingFrequency" descr="Time in seconds of media polling frequency and download pending images">
                <integer>3600</integer>
            </key>
            <group name="Window" descr="Update window hour. Format: %H:%M:%S">
                <key name="StartTime">
                    <string>08:00:00</string>
                </key>
                <key name="EndTime">
                    <string>23:59:00</string>
                </key>
            </group>
            <group name="Endpoints" descr="Media API endpoints">
                <key name="getDownloadImagePermission" descr="Get the download URL of enabled images">
                    <string>/update/getDownloadImagePermission</string>
                </key>
            </group>
        </group>
    </group>
</config>